<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">

  <title>Core Drag Drop</title>

  <script src="lib/platform/platform.js"></script>

  <link rel="import" href="lib/core-drag-drop/core-drag-drop.html">

  <style>

    html {
      font-family: 'Helvetica Neue', 'Roboto', 'Arial', sans-serif;
    }

    body {
      height: 100vh;
      margin: 0;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    .box {
      display: inline-block;
      width: 100px;
      height: 100px;
      margin: 16px;
    }

    .dropped {
      position: absolute;
      border: 1px solid black;
      width: 5px;
      height: 5px;
    }

  </style>

</head>
<body unresolved>

  <div style="border: 1px dotted silver;">


    <div class="box" style="background-color: lightblue;" draggable="false">
      <core-drag-drop></core-drag-drop>
    </div>
    

    <div class="box" style="background-color: orange;" draggable="true"></div>

    <div class="box" style="background-color: lightgreen;" draggable="true"></div>

    <div id="hello">Hello World</div>

  </div>

  <br><br><br><br><br><br>

  <div id="drop" class="box" style="border: 3px solid silver; position: relative; width: 300px; height: 300px;" draggable="false"></div>

  <script>
    addEventListener('drag-start', function(e) {
      var dragInfo = e.detail;
      // flaw #2: e vs dragInfo.event
      var color = dragInfo.event.target.style.backgroundColor;
      e.detail.avatar.appendChild(dragInfo.event.target);
      dragInfo.drag = function() {};
      dragInfo.drop = drop;
    });
    //
    function drop(dragInfo) {
      var color = "red";
      var dropTarget = dragInfo.event.relatedTarget;
      if (color && dropTarget.id === 'drop') {
        var f = dragInfo.avatar;
        f.style.left = dragInfo.event.pageX - 4 + 'px';
        f.style.top = dragInfo.event.pageY - 4 + 'px';
        dropTarget.appendChild(f);
      }
    }
  </script>

</body>
</html>
